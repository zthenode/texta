///////////////////////////////////////////////////////////////////////
//   File: evcs.hpp
//
// Author: $author$
//   Date: 5/24/2007
//
//    $Id$
///////////////////////////////////////////////////////////////////////

#ifndef _EVCS_HPP
#define _EVCS_HPP

#include "evfilesystementry.hpp"
#include "evfilesystementrytimes.hpp"
#include "evinstance.hpp"
#include "cevfilepath.hpp"

#define DEFAULT_EVCS_EVD_DIR "EVD"
#define DEFAULT_EVCS_VCS_DIR DEFAULT_EVCS_EVD_DIR "/EVCS"
#define DEFAULT_EVCS_CI_DIR DEFAULT_EVCS_VCS_DIR "/CI"
#define DEFAULT_EVCS_CO_DIR DEFAULT_EVCS_VCS_DIR "/CO"
#define DEFAULT_EVCS_VC_DIR DEFAULT_EVCS_VCS_DIR "/VC"

class EV_EXPORT_CLASS EvcsAllocator;
class EV_EXPORT_CLASS EvcsArchive;

///////////////////////////////////////////////////////////////////////
//  Class: Evcs
//
// Author: $author$
//   Date: 5/24/2007
///////////////////////////////////////////////////////////////////////
class EV_EXPORT_CLASS Evcs
: virtual public EvInstance
{
public:
    typedef EvInstance CImplements;
    typedef Evcs CDerives;

    ///////////////////////////////////////////////////////////////////////
    // Function: OpenArchive
    //
    //   Author: $author$
    //     Date: 9/28/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvcsArchive* OpenArchive
    (EvError& error,
     const char* name=0,
     LONG length=-1) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: CloseArchive
    //
    //   Author: $author$
    //     Date: 9/28/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError CloseArchive
    (EvcsArchive& archive) = 0;

    ///////////////////////////////////////////////////////////////////////
    // Function: StartDoOp
    //
    //   Author: $author$
    //     Date: 5/24/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError StartDoOp() = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: StartCheckInOp
    //
    //   Author: $author$
    //     Date: 5/25/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError StartCheckInOp
    (const char* evcName, 
     const EvFileSystemEntryTimes& fileTimes,
     bool isBinary=false) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: StartCheckOutOp
    //
    //   Author: $author$
    //     Date: 8/17/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError StartCheckOutOp
    (CEvFilePath& filePath,
     EvFileSystemEntry& fileEntry,
     const char* evcName, 
     bool isBinary=false, 
     bool isRecursive=false) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: ContinueCheckOutOp
    //
    //   Author: $author$
    //     Date: 8/21/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError ContinueCheckOutOp
    (CEvFilePath& filePath,
     EvFileSystemEntry& fileEntry) = 0;

    ///////////////////////////////////////////////////////////////////////
    // Function: WriteOpData
    //
    //   Author: $author$
    //     Date: 5/25/2007
    ///////////////////////////////////////////////////////////////////////
    virtual LONG WriteOpData
    (const char* chars, LONG length=-1) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: ReadOpData
    //
    //   Author: $author$
    //     Date: 8/17/2007
    ///////////////////////////////////////////////////////////////////////
    virtual LONG ReadOpData
    (char* chars, ULONG size) = 0;

    ///////////////////////////////////////////////////////////////////////
    // Function: FinishOp
    //
    //   Author: $author$
    //     Date: 5/25/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError FinishOp() = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: CancelOp
    //
    //   Author: $author$
    //     Date: 5/25/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvError CancelOp() = 0;

    ///////////////////////////////////////////////////////////////////////
    // Function: SetAllocator
    //
    //   Author: $author$
    //     Date: 5/24/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvcsAllocator* SetAllocator
    (EvcsAllocator* allocator) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: GetAllocator
    //
    //   Author: $author$
    //     Date: 5/24/2007
    ///////////////////////////////////////////////////////////////////////
    virtual EvcsAllocator* GetAllocator() const = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: SetName
    //
    //   Author: $author$
    //     Date: 5/26/2007
    ///////////////////////////////////////////////////////////////////////
    virtual LONG SetName
    (const char* chars, LONG length=-1) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: GetName
    //
    //   Author: $author$
    //     Date: 5/26/2007
    ///////////////////////////////////////////////////////////////////////
    virtual const char* GetName
    (LONG& length) const = 0;

    ///////////////////////////////////////////////////////////////////////
    // Function: SetVcDir
    //
    //   Author: $author$
    //     Date: 8/17/2007
    ///////////////////////////////////////////////////////////////////////
    virtual LONG SetVcDir
    (const char* chars,
     LONG length=-1) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: GetVcDir
    //
    //   Author: $author$
    //     Date: 8/17/2007
    ///////////////////////////////////////////////////////////////////////
    virtual const char* GetVcDir
    (LONG& length) const = 0;

    ///////////////////////////////////////////////////////////////////////
    // Function: SetCiDir
    //
    //   Author: $author$
    //     Date: 7/27/2007
    ///////////////////////////////////////////////////////////////////////
    virtual LONG SetCiDir
    (const char* chars,
     LONG length=-1) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: GetCiDir
    //
    //   Author: $author$
    //     Date: 7/27/2007
    ///////////////////////////////////////////////////////////////////////
    virtual const char* GetCiDir
    (LONG& length) const = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: SetCoDir
    //
    //   Author: $author$
    //     Date: 7/27/2007
    ///////////////////////////////////////////////////////////////////////
    virtual LONG SetCoDir
    (const char* chars,
     LONG length=-1) = 0;
    ///////////////////////////////////////////////////////////////////////
    // Function: GetCoDir
    //
    //   Author: $author$
    //     Date: 7/27/2007
    ///////////////////////////////////////////////////////////////////////
    virtual const char* GetCoDir
    (LONG& length) const = 0;
};
#endif // _EVCS_HPP
