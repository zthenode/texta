///////////////////////////////////////////////////////////////////////
//   File: cevservletexporter.cpp
//
// Author: $author$
//   Date: 4/13/2007
//
//    $Id$
///////////////////////////////////////////////////////////////////////

#include "cevservletexporter.hpp"

///////////////////////////////////////////////////////////////////////
//  Class: CEvServletExporter
//
// Author: $author$
//   Date: 4/13/2007
///////////////////////////////////////////////////////////////////////
CEvServletExporter* CEvServletExporter::m_exporter = 0;

///////////////////////////////////////////////////////////////////////
//
// Exported functions
//
///////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////
// Function: EV_SERVLET_ACQUIRE
//
//   Author: $author$
//     Date: 9/10/2007
///////////////////////////////////////////////////////////////////////
EV_PLATFORM_EXPORT EvServlet* 
EV_SERVLET_ACQUIRE(EvError& error)
{
    EvServlet* servlet = 0;
    CEvServletExporter* exporter;

    if ((exporter = CEvServletExporter::GetExporter()))
        servlet = exporter->AcquireEvServlet(error);
    return servlet;
}

///////////////////////////////////////////////////////////////////////
// Function: EV_SERVLET_RELEASE
//
//   Author: $author$
//     Date: 9/10/2007
///////////////////////////////////////////////////////////////////////
EV_PLATFORM_EXPORT EvError 
EV_SERVLET_RELEASE(EvServlet* servlet)
{
    EvError error = EV_ERROR_FAILED;
    CEvServletExporter* exporter;

    if ((exporter = CEvServletExporter::GetExporter()))
    if (servlet)
        error = exporter->ReleaseServlet(*servlet);
    else error = exporter->ReleaseAllServlets();
    return error;
}
